(function(){"use strict";var e={102:function(e,r,t){var a=t(963),n=t(17),o=t(252);function s(e,r,t,a,n,s){const l=(0,o.up)("NavbarMenu"),i=(0,o.up)("ErrorMessage"),u=(0,o.up)("LoadingSpinner"),d=(0,o.up)("GalleryDetails"),c=(0,o.up)("ModalWindow"),m=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l),null!==a.error?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),a.isLoading?((0,o.wg)(),(0,o.j4)(u,{key:1})):(0,o.kq)("",!0),a.showModal?((0,o.wg)(),(0,o.j4)(c,{key:2,size:"lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(m)],64)}var l=t(577);const i=(0,o._)("h1",null,"Mary & John's Wedding",-1),u={key:0},d=(0,o.Uk)("Gallery"),c=(0,o.Uk)("Upload"),m={key:0},g=(0,o.Uk)("Approve"),p={key:1},w=(0,o.Uk)("Login"),y=(0,o.Uk)("Register");function h(e,r,t,a,n,s){const h=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",null,[i,(0,o._)("nav",null,[a.token?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o.Wm)(h,{to:"/gallery",class:(0,l.C_)({active:"gallery"===a.routeName})},{default:(0,o.w5)((()=>[d])),_:1},8,["class"])]),(0,o._)("li",null,[(0,o.Wm)(h,{to:"/upload",class:(0,l.C_)({active:"upload"===a.routeName})},{default:(0,o.w5)((()=>[c])),_:1},8,["class"])]),a.user.admin?((0,o.wg)(),(0,o.iD)("li",m,[(0,o.Wm)(h,{to:"/approve",class:(0,l.C_)({active:"approve"===a.routeName})},{default:(0,o.w5)((()=>[g])),_:1},8,["class"])])):(0,o.kq)("",!0),(0,o._)("li",null,[(0,o._)("p",null,"Hey There, "+(0,l.zw)(a.user.name),1)]),(0,o._)("li",null,[(0,o._)("button",{onClick:r[0]||(r[0]=(...e)=>a.handleClick&&a.handleClick(...e))},"Logout")])])])):((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("ul",null,[(0,o._)("li",null,["login"!==a.routeName?((0,o.wg)(),(0,o.j4)(h,{key:0,to:"/"},{default:(0,o.w5)((()=>[w])),_:1})):(0,o.kq)("",!0)]),(0,o._)("li",null,["register"!==a.routeName?((0,o.wg)(),(0,o.j4)(h,{key:0,to:"/register"},{default:(0,o.w5)((()=>[y])),_:1})):(0,o.kq)("",!0)])])]))])])}var v=t(907),f=t(119),_={name:"NavbarMenu",setup(){const e=(0,f.tv)(),r=(0,v.oR)(),t=(0,o.Fl)((()=>r.getters.getToken)),a=(0,o.Fl)((()=>r.getters["users/getUser"])),n=(0,o.Fl)((()=>e.currentRoute.value.name));null!=t.value||""===n.value&&"register"===n.value||e.push("/");const s=()=>{r.dispatch("users/logout")};return{user:a,token:t,routeName:n,handleClick:s}}},k=t(744);const M=(0,k.Z)(_,[["render",h]]);var b=M;const D={class:"loading"};function U(e,r,t,a,n,s){return(0,o.wg)(),(0,o.iD)("div",D)}var L={};const G=(0,k.Z)(L,[["render",U]]);var S=G;const R={class:"error"};function z(e,r,t,a,n,s){return(0,o.wg)(),(0,o.iD)("div",R,(0,l.zw)(a.error),1)}var C={name:"ErrorMessage",setup(){const e=(0,v.oR)(),r=e.getters.getError;return{error:r}}};const T=(0,k.Z)(C,[["render",z]]);var Z=T;function F(e,r,t,n,s,i){return(0,o.wg)(),(0,o.iD)("div",{class:"backdrop",onClick:r[0]||(r[0]=(0,a.iM)(((...e)=>n.closeModal&&n.closeModal(...e)),["self"]))},[(0,o._)("div",{class:(0,l.C_)(["modal",{dark:"dark"===e.theme,sm:"sm"===t.size,md:"md"===t.size,lg:"lg"===t.size,xl:"xl"===t.size}])},[(0,o.WI)(e.$slots,"default")],2)])}var I={name:"ModalWindow",props:["size"],setup(){const e=(0,v.oR)();return{closeModal(){e.dispatch("setShowModal",!1)}}}};const q=(0,k.Z)(I,[["render",F]]);var E=q;const W=["src"];function j(e,r,t,a,n,s){return(0,o.wg)(),(0,o.iD)("img",{src:a.image.url},null,8,W)}var x={name:"GalleryDetails",setup(){const e=(0,v.oR)(),r=e.getters.getModalImage;return{image:r}}};const H=(0,k.Z)(x,[["render",j]]);var O=H,N={components:{NavbarMenu:b,LoadingSpinner:S,ErrorMessage:Z,ModalWindow:E,GalleryDetails:O},setup(){const e=(0,v.oR)(),r=(0,o.Fl)((()=>e.getters.error)),t=(0,o.Fl)((()=>e.getters.isLoading)),a=(0,o.Fl)((()=>e.getters.getShowModal));return{error:r,isLoading:t,showModal:a}}};const V=(0,k.Z)(N,[["render",s]]);var A=V;const P=(0,o._)("label",{for:"username"},"Username",-1),B=(0,o._)("label",{for:"password"},"Password",-1),Y={key:0,class:"error"};function J(e,r,t,n,s,i){return(0,o.wg)(),(0,o.iD)("form",null,[P,(0,o.wy)((0,o._)("input",{type:"text",id:"username",required:"","onUpdate:modelValue":r[0]||(r[0]=e=>n.username=e)},null,512),[[a.nr,n.username]]),B,(0,o.wy)((0,o._)("input",{type:"password",id:"password",required:"","onUpdate:modelValue":r[1]||(r[1]=e=>n.password=e)},null,512),[[a.nr,n.password]]),n.error?((0,o.wg)(),(0,o.iD)("div",Y,(0,l.zw)(n.error),1)):(0,o.kq)("",!0),(0,o._)("button",{type:"submit",onClick:r[2]||(r[2]=(0,a.iM)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},"Log in")])}var K=t(262),$={setup(){const e=(0,K.iH)(""),r=(0,K.iH)(""),t=(0,K.iH)(""),a=(0,v.oR)(),n=async()=>{try{await a.dispatch("users/login",{username:e.value,password:r.value})}catch(t){t.value=t.message}};return{username:e,password:r,error:t,handleSubmit:n}}};const Q=(0,k.Z)($,[["render",J]]);var X=Q;const ee=(0,o._)("label",{for:"name"},"Name",-1),re=(0,o._)("label",{for:"description"},"Description",-1),te=(0,o._)("label",{for:"username"},"Username",-1),ae=(0,o._)("label",{for:"password"},"Password",-1),ne={key:0,class:"error"};function oe(e,r,t,n,s,i){return(0,o.wg)(),(0,o.iD)("form",null,[ee,(0,o.wy)((0,o._)("input",{type:"text",id:"name",required:"","onUpdate:modelValue":r[0]||(r[0]=e=>n.name=e)},null,512),[[a.nr,n.name]]),re,(0,o.wy)((0,o._)("input",{type:"text",id:"description",required:"","onUpdate:modelValue":r[1]||(r[1]=e=>n.description=e)},null,512),[[a.nr,n.description]]),te,(0,o.wy)((0,o._)("input",{type:"text",id:"username",required:"","onUpdate:modelValue":r[2]||(r[2]=e=>n.username=e)},null,512),[[a.nr,n.username]]),ae,(0,o.wy)((0,o._)("input",{type:"password",id:"password",required:"","onUpdate:modelValue":r[3]||(r[3]=e=>n.password=e)},null,512),[[a.nr,n.password]]),n.error?((0,o.wg)(),(0,o.iD)("div",ne,(0,l.zw)(n.error),1)):(0,o.kq)("",!0),(0,o._)("button",{type:"submit",onClick:r[4]||(r[4]=(0,a.iM)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},"Register")])}var se={name:"RegisterView",setup(){const e=(0,K.iH)(""),r=(0,K.iH)(""),t=(0,K.iH)(""),a=(0,K.iH)(""),n=(0,v.oR)(),o=n.getters.error,s=async()=>{try{await n.dispatch("users/register",{name:e.value,description:r.value,username:t.value,password:a.value})}catch(o){o.value=o.message}};return{name:e,description:r,username:t,password:a,error:o,handleSubmit:s}}};const le=(0,k.Z)(se,[["render",oe]]);var ie=le;const ue={class:"container"};function de(e,r,t,a,n,s){const l=(0,o.up)("GalleryList");return(0,o.wg)(),(0,o.iD)("div",ue,[(0,o.Wm)(l)])}const ce={class:"gallery"};function me(e,r,t,a,n,s){const l=(0,o.up)("GallerySingle");return(0,o.wg)(),(0,o.iD)("div",ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.images,((e,r)=>((0,o.wg)(),(0,o.j4)(l,{key:r,image:e},null,8,["image"])))),128))])}const ge={class:"figure"},pe=["src"],we={class:"caption"};function ye(e,r,t,a,n,s){return(0,o.wg)(),(0,o.iD)("div",{class:"image-container",onClick:r[0]||(r[0]=e=>a.imageDetails(t.image))},[(0,o._)("div",ge,[(0,o._)("img",{class:"image",src:t.image.url,alt:""},null,8,pe),(0,o._)("div",we,[(0,o._)("p",null,(0,l.zw)(t.image.description),1),(0,o._)("small",null,"picture by "+(0,l.zw)(t.image.user),1)])])])}var he={name:"GallerySingle",props:["image"],setup(){const e=(0,v.oR)(),r=r=>{e.dispatch("setShowModal",!0),e.dispatch("setModalImage",r)};return{imageDetails:r}}};const ve=(0,k.Z)(he,[["render",ye]]);var fe=ve,_e={name:"GalleryList",components:{GallerySingle:fe},setup(){const e=(0,v.oR)(),r=(0,o.Fl)((()=>e.getters["gallery/getGallery"]));return{images:r}}};const ke=(0,k.Z)(_e,[["render",me]]);var Me=ke,be={name:"GalleryView",components:{GalleryList:Me},setup(){const e=(0,v.oR)();e.dispatch("gallery/fetch_gallery")}};const De=(0,k.Z)(be,[["render",de]]);var Ue=De;const Le=(0,o._)("label",{for:"file"},"Upload file",-1);function Ge(e,r,t,a,n,s){return(0,o.wg)(),(0,o.iD)(o.HY,null,[Le,(0,o._)("input",{type:"file",id:"file",onChange:r[0]||(r[0]=(...e)=>a.handleFile&&a.handleFile(...e))},null,32)],64)}var Se={name:"UploadView",setup(){const e=(0,v.oR)(),r=(0,K.iH)(null),t=()=>{const t=new FormData;t.append("file",r),e.dispatch("gallery/add_image",t)};return{handleFile:t}}};const Re=(0,k.Z)(Se,[["render",Ge]]);var ze=Re;const Ce={key:0,class:"error"},Te={key:1},Ze={key:2};function Fe(e,r,t,a,n,s){const i=(0,o.up)("GalleryList"),u=(0,o.up)("LoadingSpinner");return a.gallery_error?((0,o.wg)(),(0,o.iD)("div",Ce,(0,l.zw)(a.gallery_error),1)):a.gallery.length?((0,o.wg)(),(0,o.iD)("div",Te,[(0,o.Wm)(i,{gallery:a.gallery},null,8,["gallery"])])):((0,o.wg)(),(0,o.iD)("div",Ze,[(0,o.Wm)(u)]))}var Ie={name:"ApproveView",components:{GalleryList:Me,LoadingSpinner:S},setup(){const e=(0,v.oR)(),r=(0,o.Fl)((()=>e.getters.gallery)),t=(0,o.Fl)((()=>e.getters.gallery_error)),a=r=>e.dispatch("loadGallery",r);return{gallery:r,gallery_error:t,loadGallery:a}}};const qe=(0,k.Z)(Ie,[["render",Fe]]);var Ee=qe;const We={src:"https://http.cat/404",alt:"404 Not Found"};function je(e,r){return(0,o.wg)(),(0,o.iD)("img",We)}const xe={},He=(0,k.Z)(xe,[["render",je]]);var Oe=He;const Ne=[{path:"/",name:"login",component:X},{path:"/register",name:"register",component:ie},{path:"/gallery",name:"gallery",component:Ue,children:[{path:":index",component:O,props:!0,meta:{showModal:!0}}]},{path:"/upload",name:"upload",component:ze},{path:"/approve",name:"approve",component:Ee},{path:"/:catchAll(.*)",name:"not-found",component:Oe}],Ve=(0,f.p7)({history:(0,f.PO)(),routes:Ne});var Ae=Ve,Pe=t(702),Be=t(669),Ye=t.n(Be),Je=t(309),Ke=t.n(Je);const $e="http://localhost:8000/api",Qe="https://8cc1f5f0-gallery.s3.sa-east-1.amazonaws.com/avatar/",Xe={user_id:null,user_name:null,user_admin:null,AVATAR_DIR:Qe},er={getUser:e=>({id:e.user_id,name:e.user_name,admin:e.user_admin})},rr={setUser(e,r){const t=Ke().decode(r);e.user_id=t.user_id,e.user_name=t.user_name,e.user_admin=t.user_admin},clearUser(e){e.user_id=null,e.user_name=null,e.user_admin=null}},tr={async login(e,r){const t={username:r.username,password:r.password};return await Ye().post($e+"/auth",t).then((r=>{e.commit("setToken",r.data.token,{root:!0}),e.commit("setUser",r.data.token),Ae.push("/gallery")})).catch((r=>{e.commit("setError",r.response.data.message,{root:!0})}))},async register(e,r){const t={name:r.name,description:r.description,username:r.user_name,password:r.password};return await Ye().post($e+"/register",t).then((r=>{e.commit("setToken",r.data.token,{root:!0}),e.commit("setUser",r.data.token),Ae.push("/gallery")})).catch((r=>{e.commit("setError",r.response.data.message,{root:!0})}))},async logout(e){const r={headers:{Authorization:"Bearer "+e.rootState.token}};return await Ye().get($e+"/logout",r).then((()=>{e.commit("clearUser",null),e.commit("setToken",null,{root:!0}),Ae.push("/")})).catch((r=>{e.commit("setError",r.response.data.message,{root:!0})}))}};var ar={namespaced:!0,state:Xe,getters:er,mutations:rr,actions:tr};const nr="http://localhost:8000/api",or={gallery:[]},sr={getGallery:e=>e.gallery},lr={setGallery(e,r){e.gallery=r}},ir={async fetch_gallery(e){const r={headers:{Authorization:"Bearer "+e.rootGetters.getToken}};return await Ye().get(nr+"/gallery",r).then((r=>{e.commit("setGallery",r.data)})).catch((r=>{e.commit("setError",r.response.data.message,{root:!0})}))},async add_image(e,r){const t={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e.rootGetters.getToken}};return await Ye().post(nr+"/upload",r,t).then((e=>{console.log(e.data)})).catch((r=>{e.commit("setError",r.response.data.message,{root:!0})}))}};var ur={namespaced:!0,state:or,getters:sr,mutations:lr,actions:ir},dr=(0,v.MT)({state:{token:null,isLoading:!1,error:null,showModal:!1,modalImage:null},getters:{getToken:e=>e.token,getIsLoading:e=>e.isLoading,getError:e=>e.error,getShowModal:e=>e.showModal,getModalImage:e=>e.modalImage},mutations:{setError(e,r){e.error=r},setToken(e,r){e.token=r},setIsLoading(e,r){e.isLoading=r},setShowModal(e,r){e.showModal=r},setModalImage(e,r){e.modalImage=r}},actions:{setError({commit:e},r){e("setError",r)},setToken({commit:e},r){e("setToken",r)},setIsLoading({commit:e},r){e("setIsLoading",r)},setShowModal({commit:e},r){e("setShowModal",r)},setModalImage({commit:e},r){e("setModalImage",r)}},modules:{users:ar,gallery:ur},plugins:[(0,Pe.Z)()]});(0,a.ri)(A).use(Ae).use(dr).use(n.Z,{loading:"./assets/images/loading.png",error:"./assets/images/error.png"}).mount("#app")}},r={};function t(a){var n=r[a];if(void 0!==n)return n.exports;var o=r[a]={exports:{}};return e[a].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(r,a,n,o){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],o=e[d][2];for(var l=!0,i=0;i<a.length;i++)(!1&o||s>=o)&&Object.keys(t.O).every((function(e){return t.O[e](a[i])}))?a.splice(i--,1):(l=!1,o<s&&(s=o));if(l){e.splice(d--,1);var u=n();void 0!==u&&(r=u)}}return r}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,n,o]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,a){var n,o,s=a[0],l=a[1],i=a[2],u=0;if(s.some((function(r){return 0!==e[r]}))){for(n in l)t.o(l,n)&&(t.m[n]=l[n]);if(i)var d=i(t)}for(r&&r(a);u<s.length;u++)o=s[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},a=self["webpackChunkwedding_gallery"]=self["webpackChunkwedding_gallery"]||[];a.forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(102)}));a=t.O(a)})();
//# sourceMappingURL=app.697bb35e.js.map